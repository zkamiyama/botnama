export const translations = {
  en: {
    summary_items: "Remain",
    pending_items: (n) => `${n}`,
    queue_count: (n) => `List ${n}`,
    tab_list: "Queue",
    tab_log: "Log",
    tab_notifications: "Notifications",
    tab_debug: "Debug",
    tab_comments: "Comments",
    tab_system: "System",
    tab_rules: "Rules",
    tab_stock: "Stock",
    csv_button_label: "CSV",
    action_copy: "Copy",
    locale_auto: "Auto",
    locale_ja: "日本語",
    locale_en: "English",
    rule_enable: "Enable max duration",
    rule_max: "Max duration (minutes)",
    rule_no_duplicate: "Block duplicate requests",
    rule_cooldown: "Cooldown after playback (minutes)",
    rule_cooldown_hint: "0 = cannot request again until queue is cleared",
    rule_poll_enable: "Enable continuation poll",
    rule_poll_interval: "Ask every (sec)",
    rule_poll_window: "Voting window (sec)",
    rule_poll_stop_delay: "Stop delay after rejection (sec)",
    rule_concurrent_enable: "Simultaneous request limit",
    rule_concurrent_max: "Max requests per user",
    poll_question_title: "Continue?",
    poll_question_body: "Continue? (Yes/No)",
    poll_result_title: "Poll Result",
    poll_result_body: "Yes: {yes}% No: {no}%",
    poll_vote_yes: "Yes",
    poll_vote_no: "No",
    rule_save: "Save",
    rule_saved: "Saved",
    rule_save_failed: "Save failed",
    copy_link: "Copy link",
    copy_title: "Copy title",
    copied_link: "Link copied",
    copied_title: "Title copied",
    comment_action_copy_comment: "Copy comment",
    comment_action_copy_user: "Copy user ID",
    comment_action_add_ng: "Add to NG list",
    notif_enable: "Relay telops as comments",
    notif_send_nico: "Send to Niconico",
    notif_send_yt: "Send to YouTube",
    notif_delay_label: "Send delay (ms)",
    notif_save: "Save",
    notif_saved: "Saved",
    notif_save_fail: "Save failed",
    notif_load_fail: (msg) => `Load failed: ${msg ?? ""}`,
    ng_user_add_done: ({ user }) => `Blocked ${user ?? ""}`,
    ng_user_remove_done: ({ user }) => `Removed ${user ?? ""}`,
    ng_user_clear_done: "Cleared NG user list",
    ng_user_action_fail: (msg) => `NG update failed: ${msg}`,
    status_overlay_connected: "Overlay on",
    status_overlay_disconnected: "Overlay off",
    status_downloading: (n) => `DL: ${n}`,
    status_autoplay: (on) => `Auto: ${on ? "On" : "Off"}`,
    status_intake: (on) => `Request: ${on ? "On" : "Off"}`,
    status_shuffle: (mode) => {
      const map = {
        off: "Shuffle: Off",
        priority: "Shuffle: In priority range",
        any: "Shuffle: Ignore priority",
      };
      return map[mode] ?? `Shuffle: ${mode}`;
    },
    msg_stream_not_found: "No broadcast detected",
    msg_not_detected: "Not detected",
    request_accepted_title: "Request received",
    request_ready_title: "Request ready",
    request_failed_title: "Request failed",
    request_rejected_title: "Request rejected",
    request_rejected_full: ({ url }) => `Request rejected: ${url ?? ""}`,
    request_stop_title: "Playback stopped",
    request_autoplay_paused_title: "Autoplay paused",
    request_autoplay_resumed_title: "Autoplay resumed",
    request_intake_paused_title: "Requests closed",
    request_intake_resumed_title: "Requests opened",
    request_stop_full: ({ url }) => `Stopped playback: ${url ?? ""}`,
    request_accepted_full: ({ url }) => `Request accepted: ${url ?? ""}`,
    request_play_title: "Now playing",
    stat_uploaded: "Published",
    stat_duration: "Duration",
    stat_views: "Views",
    stat_comments: "Comments",
    stat_uploader: "Uploader",
    stat_likes: "Likes",
    stat_dislikes: "Dislikes",
    stat_mylist: "MyList",
    stat_favorites: "Favorites",
    stat_danmaku: "Danmaku",
    stat_fetched: "Fetched",
    stat_remaining_summary_value: ({ count, duration }) => `${count} (${duration})`,
    stat_remaining_summary: "Queue left",
    ctx_suspend: "Suspend selection",
    ctx_resume: "Unsuspend selection",
    body_url_only: ({ url }) => url ?? "",
    body_with_reason: ({ reason, url }) => `${reason ?? ""} (${url ?? ""})`,
    btn_stop: "Stop",
    btn_auto: "Autoplay",
    btn_shuffle: "Shuffle",
    btn_intake: "Requests",
    btn_stock_save: "Save",
    btn_stock_add: "Add",
    btn_stock_submit: "Submit to queue",
    btn_stock_submit_suspend: "Submit as suspend",
    stock_label: "Stock",
    stock_new: "New stock",
    stock_add_placeholder: "Enter URL or message",
    stock_priority_placeholder: "Priority",
    stock_add_required: "Message is required",
    stock_add_done: "Added to stock",
    stock_add_fail: (msg) => `Add failed: ${msg}`,
    stock_delete_done: (n) => `Deleted ${n} item(s)`,
    stock_delete_fail: (msg) => `Delete failed: ${msg}`,
    stock_new_prompt: "Enter new stock name",
    stock_new_done: ({ name }) => `Created stock "${name ?? ""}"`,
    stock_new_fail: (msg) => `Stock creation failed: ${msg}`,
    stock_list_empty: "No stocks available",
    stock_priority_invalid: "Priority must be a number",
    stock_save_done: "Stock saved",
    stock_save_fail: "Stock save failed",
    stock_load_fail: "Stock load failed",
    stock_submit_done: (n) => `Submitted ${n} item(s)`,
    stock_submit_fail: (msg) => `Submit failed: ${msg}`,
    stock_discard_unsaved: "Unsaved stock changes were discarded",
    btn_skip: "Skip",
    btn_refresh: "Refresh",
    btn_clear: "Clear all",
    btn_pause: "Pause",
    btn_resume: "Resume",
    seek_back: "-10s",
    seek_forward: "+10s",
    comment_label: "Debug Comment",
    comment_placeholder: "Enter a comment (URL registers a request)",
    user_label: "User (optional)",
    user_placeholder: "Name",
    comment_submit: "Send",
    comment_destination_label: "Destination",
    comment_destination_debug: "Debug (Internal)",
    comment_destination_youtube: "YouTube Live Chat",
    comment_destination_niconico: "Niconico Live",
    auth_status_authenticated: "Authenticated",
    auth_status_not_authenticated: "Not authenticated",
    auth_checking: "Checking...",
    msg_pause_fail: (msg) => `Pause toggle failed: ${msg}`,
    msg_stream_retry: "Live updates disconnected. Reconnecting...",
    msg_eventsource_fallback: "EventSource unsupported. Falling back to polling.",
    msg_selection_none: "Select at least one item",
    msg_suspend_done: (n) => `Suspended ${n} item(s)`,
    msg_resume_done: (n) => `Resumed ${n} item(s)`,
    btn_connect_chat: "Connect Chat",
    btn_connected: "Connected",
    broadcast_url_label: "Live URL: ",
    manual_input_link: "Enter live URL",
    manual_input_clear: "Clear",
    manual_dialog_title: "Enter broadcast URL",
    manual_dialog_hint: "Paste a YouTube or Niconico live URL / ID.",
    manual_dialog_prompt: "Enter YouTube / Niconico live URL or ID",
    manual_input_invalid: "Could not parse the URL.",
    manual_status_manual: "Manual URL",
    btn_cancel: "Cancel",
    btn_apply: "Apply",
    lbl_language: "Language",
    lbl_debug_comment: "Debug Comment",
    lbl_user_optional: "User (optional)",
    lbl_destination: "Destination",
    lbl_dest_debug: "Debug (Internal)",
    msg_comment_required: "Comment cannot be empty",
    msg_youtube_not_authenticated: "YouTube not authenticated. Please login first.",
    msg_youtube_broadcast_missing: "YouTube broadcast not detected. Please start a broadcast first.",
    msg_youtube_send_success: "Comment sent to YouTube successfully",
    msg_youtube_error: ({ message }) => `YouTube error: ${message ?? "Unknown error"}`,
    msg_niconico_not_authenticated: "Niconico not authenticated. Please login first.",
    msg_niconico_broadcast_missing: "Niconico broadcast not detected. Please start a broadcast first.",
    msg_niconico_send_success: "Comment sent to Niconico successfully",
    msg_niconico_error: ({ message }) => `Niconico error: ${message ?? "Unknown error"}`,
    lbl_browser_auth: "Browser Cookie Authentication",
    lbl_configuration: "Configuration: Edit config/settings.toml to set browser for cookies (chrome, edge, firefox).",
    lbl_supported_browsers: "",
    lbl_profile_optional: "",
    rule_concurrent_label: "Simultaneous request limit",
    rule_concurrent_max_label: "Max requests per user",
    btn_save: "Save",
    btn_send: "Send",
    btn_connect: "Connect",
    msg_suspend_fail: (msg) => `Action failed: ${msg}`,
    msg_comment_saved: "Comment saved",
    msg_request_registered: (id) => `Registered: ${id}`,
    msg_update_fail: (msg) => `Update failed: ${msg}`,
    msg_send_fail: (msg) => `Send failed: ${msg}`,
    msg_clear_fail: (msg) => `Clear failed: ${msg}`,
    msg_skip_fail: (msg) => `Skip failed: ${msg}`,
    msg_reorder_fail: (msg) => `Reorder failed: ${msg}`,
    msg_parse_fail: "Failed to parse live update",
    msg_action_fail: ({ label, msg }) => `${label ?? "Action"} failed: ${msg ?? ""}`,
    reason_duplicate_in_queue: ({ url }) => `Already requested: ${url ?? ""}`,
    reason_cooldown_wait: ({ minutes, url }) => minutes === 0
      ? `Please remove from queue before requesting again. (${url ?? ""})`
      : `You can request again in ${minutes} min. (${url ?? ""})`,
    rule_site_section: "Allowed video sites",
    rule_site_youtube: "youtube.com",
    rule_site_nicovideo: "nicovideo.jp",
    rule_site_bilibili: "bilibili.com",
    rule_custom_section: "Custom whitelist",
    rule_custom_pattern_placeholder: "Regex or URL pattern (e.g. https://example.com/watch/(\\w+))",
    rule_custom_alias_placeholder: "Short alias (e.g. sc)",
    rule_custom_add: "Add pattern",
    rule_custom_remove: "Remove",
    rule_ng_section: "NG users",
    rule_ng_enable: "Block NG user IDs",
    rule_ng_input_label: "Add user ID",
    rule_ng_placeholder: "Exact user ID (case-sensitive)",
    rule_ng_add: "Add",
    rule_ng_clear: "Clear list",
    rule_ng_empty: "No NG users",
    rule_ng_hint: "Right-click a comment to add quickly.",
    reason_invalid_url: ({ url }) => `Invalid URL: ${url ?? ""}`,
    reason_site_disabled: ({ siteKey }) => {
      const labels = {
        youtube: "youtube.com",
        nicovideo: "nicovideo.jp",
        bilibili: "bilibili.com",
      };
      const name = labels[siteKey] ?? "this site";
      return `${name} is disabled for requests.`;
    },
    reason_ng_user: ({ user }) => `Blocked user: ${user ?? ""}`,
    confirm_delete: "Delete this item?",
    confirm_delete_all: "Delete all items?",
    confirm_delete_logs: "Delete all playback logs?",
    confirm_clear_ng_users: "Clear all NG users?",
    tooltip_suspend_origin: ({ reason }) => `Suspended (from: ${reason ?? ""})`,
    tooltip_suspend_plain: "Suspended",
    anonymous_user: "Anonymous",
    queue_empty: "Queue is empty",
    comments_empty: "No comments",
    comments_header_time: "Time",
    comments_header_user: "User",
    comments_header_body: "Body",
    comments_request_detected: "Request detected",
    comments_request_failed: ({ reason }) => reason
      ? `Request failed: ${reason}`
      : "Request failed",
    comments_request_rejected: ({ reason }) => reason
      ? `Request rejected: ${reason}`
      : "Request rejected",
    comments_clear: "Clear",
    comments_clear_done: "Comments cleared",
    comments_clear_fail: (msg) => `Comment clear failed: ${msg}`,
    comments_download_fail: (msg) => `CSV download failed: ${msg}`,
    comments_copy_done: "Copied comments CSV to clipboard",
    comments_copy_fail: (msg) => `Copy failed: ${msg}`,
    single_comment_copy_done: "Copied comment text",
    user_id_copy_done: "Copied user ID",
    confirm_delete_comments: "Delete all comments?",
    log_header_time: "Time",
    log_header_title: "Title",
    log_header_url: "URL",
    log_clear: "Clear",
    log_clear_done: "Logs cleared",
    log_clear_fail: (msg) => `Log clear failed: ${msg}`,
    log_download_fail: (msg) => `CSV download failed: ${msg}`,
    log_copy_done: "Copied logs CSV to clipboard",
    log_copy_fail: (msg) => `Copy failed: ${msg}`,
    log_empty: "No playback history",
    log_title_unknown: "Untitled",
    queue_title_loading: "Loading title",
    system_in_use: "yt-dlp (in use)",
    system_latest: "yt-dlp latest",
    system_ytdlp_combined: "yt-dlp (latest release)",
    system_update_btn: "Update",
    status_label_queued: "Queued",
    status_label_validating: "Validating",
    status_label_downloading: "Downloading",
    status_label_ready: "Ready",
    status_label_playing: "Playing",
    status_label_done: "Done",
    status_label_failed: "Error",
    status_label_rejected: "Rejected",
    status_label_suspend: "Suspended",
    reason_concurrent_limit: ({ limit }) => limit
      ? `Concurrent request limit reached (max ${limit})`
      : "Concurrent request limit reached",
  },
  ja: {
    summary_items: "残り",
    pending_items: (n) => `${n}`,
    queue_count: (n) => `リスト ${n}件`,
    tab_list: "再生リスト",
    tab_log: "ログ",
    tab_notifications: "通知",
    tab_debug: "デバッグ",
    tab_comments: "コメント",
    tab_system: "システム",
    tab_rules: "ルール",
    tab_stock: "ストック",
    csv_button_label: "CSV",
    action_copy: "コピー",
    locale_auto: "自動",
    locale_ja: "日本語",
    locale_en: "英語",
    rule_enable: "最大再生時間を有効にする",
    rule_max: "最大再生時間 (分)",
    rule_no_duplicate: "重複リクエストをブロック",
    rule_cooldown: "再生後のクールダウン (分)",
    rule_cooldown_hint: "0=キューを空にするまで再リク不可",
    rule_poll_enable: "継続可否アンケートを有効",
    rule_poll_interval: "質問間隔 (秒)",
    rule_poll_window: "投票時間 (秒)",
    rule_poll_stop_delay: "拒否後の停止遅延 (秒)",
    rule_concurrent_enable: "同時リクエスト制限",
    rule_concurrent_max: "ユーザーごとの上限数",
    poll_question_title: "続けますか?",
    poll_question_body: "続けますか? (y/n)",
    poll_result_title: "アンケート結果",
    poll_result_body: "y: {yes}% n: {no}%",
    poll_vote_yes: "y",
    poll_vote_no: "n",
    rule_save: "保存",
    rule_saved: "保存しました",
    rule_save_failed: "保存に失敗しました",
    copy_link: "リンクをコピー",
    copy_title: "タイトルをコピー",
    copied_link: "リンクをコピーしました",
    copied_title: "タイトルをコピーしました",
    comment_action_copy_comment: "コメントをコピー",
    comment_action_copy_user: "ユーザーIDをコピー",
    comment_action_add_ng: "NGユーザーに追加",
    notif_enable: "テロップをコメントとして送信",
    notif_send_nico: "ニコニコへ送信",
    notif_send_yt: "YouTubeへ送信",
    notif_delay_label: "送信ディレイ (ms)",
    notif_save: "保存",
    notif_saved: "保存しました",
    notif_save_fail: "保存に失敗しました",
    notif_load_fail: (msg) => `読み込み失敗: ${msg ?? ""}`,
    ng_user_add_done: ({ user }) => `${user ?? ""} をNGに追加しました`,
    ng_user_remove_done: ({ user }) => `${user ?? ""} をNGから削除しました`,
    ng_user_clear_done: "NGユーザー一覧をクリアしました",
    ng_user_action_fail: (msg) => `NGユーザー更新に失敗しました: ${msg}`,
    status_overlay_connected: "Overlay接続中",
    status_overlay_disconnected: "Overlay切断",
    status_downloading: (n) => `DL中: ${n}件`,
    status_autoplay: (on) => `自動再生: ${on ? "ON" : "OFF"}`,
    status_intake: (on) => `リクエスト: ${on ? "受付" : "停止"}`,
    status_shuffle: (mode) => {
      const map = {
        off: "シャッフル: OFF",
        priority: "シャッフル: 優先度内",
        any: "シャッフル: 優先度無視",
      };
      return map[mode] ?? `シャッフル: ${mode}`;
    },
    msg_stream_not_found: "配信未検出",
    msg_not_detected: "未検出",
    request_accepted_title: "リクエストを受け付けました",
    request_ready_title: "リクエスト準備完了",
    request_failed_title: "リクエスト失敗",
    request_rejected_title: "リクエスト却下",
    request_rejected_full: ({ url }) => `リクエスト却下: ${url ?? ""}`,
    request_stop_title: "再生を停止しました",
    request_autoplay_paused_title: "自動再生を一時停止",
    request_autoplay_resumed_title: "自動再生を再開",
    request_intake_paused_title: "リクエスト受付を停止",
    request_intake_resumed_title: "リクエスト受付を再開",
    request_stop_full: ({ url }) => `再生停止: ${url ?? ""}`,
    request_accepted_full: ({ url }) => `受付: ${url ?? ""}`,
    request_play_title: "再生中",
    stat_uploaded: "投稿日",
    stat_duration: "再生時間",
    stat_views: "再生数",
    stat_comments: "コメント数",
    stat_uploader: "投稿者",
    stat_likes: "高評価",
    stat_dislikes: "低評価",
    stat_mylist: "マイリスト",
    stat_favorites: "お気に入り",
    stat_danmaku: "弾幕",
    stat_fetched: "取得時刻",
    stat_remaining_summary_value: ({ count, duration }) => `${count}件 (${duration})`,
    stat_remaining_summary: "残りキュー",
    ctx_suspend: "選択を保留",
    ctx_resume: "保留を解除",
    body_url_only: ({ url }) => url ?? "",
    body_with_reason: ({ reason, url }) => `${reason ?? ""} (${url ?? ""})`,
    btn_stop: "停止",
    btn_auto: "自動再生",
    btn_shuffle: "シャッフル",
    btn_intake: "受付",
    btn_stock_save: "保存",
    btn_stock_add: "追加",
    btn_stock_submit: "再生リストに追加",
    btn_stock_submit_suspend: "再生リストに保留として追加",
    stock_label: "ストック",
    stock_new: "新規ストック",
    stock_add_placeholder: "URL またはメッセージを入力",
    stock_priority_placeholder: "優先度",
    stock_add_required: "メッセージを入力してください",
    stock_add_done: "ストックに追加しました",
    stock_add_fail: (msg) => `追加に失敗しました: ${msg}`,
    stock_delete_done: (n) => `${n}件を削除しました`,
    stock_delete_fail: (msg) => `削除に失敗しました: ${msg}`,
    stock_new_prompt: "新しいストック名を入力してください",
    stock_new_done: ({ name }) => `ストック「${name ?? ""}」を作成しました`,
    stock_new_fail: (msg) => `ストック作成に失敗しました: ${msg}`,
    stock_list_empty: "ストックがありません",
    stock_priority_invalid: "優先度は数値で入力してください",
    stock_save_done: "ストックを保存しました",
    stock_save_fail: "ストック保存に失敗しました",
    stock_load_fail: "ストック読込に失敗しました",
    stock_submit_done: (n) => `${n}件を追加しました`,
    stock_submit_fail: (msg) => `追加に失敗しました: ${msg}`,
    stock_discard_unsaved: "未保存のストック変更を破棄しました",
    btn_skip: "スキップ",
    btn_refresh: "更新",
    btn_clear: "全削除",
    btn_pause: "一時停止",
    btn_resume: "再開",
    seek_back: "-10秒",
    seek_forward: "+10秒",
    comment_label: "デバッグコメント",
    comment_placeholder: "コメントを入力（URLでリクエスト登録）",
    user_label: "ユーザー (任意)",
    user_placeholder: "名前",
    comment_submit: "送信",
    comment_destination_label: "送信先",
    comment_destination_debug: "デバッグ (内部)",
    comment_destination_youtube: "YouTube Live Chat",
    comment_destination_niconico: "ニコニコ生放送",
    auth_status_authenticated: "認証済み",
    auth_status_not_authenticated: "未認証",
    auth_checking: "確認中...",
    msg_pause_fail: (msg) => `一時停止切替に失敗: ${msg}`,
    msg_stream_retry: "ライブ更新が切断されました。再接続します...",
    msg_eventsource_fallback: "EventSourceが使えないためポーリングに切替えました",
    msg_selection_none: "項目を選択してください",
    msg_suspend_done: (n) => `${n}件を保留にしました`,
    msg_resume_done: (n) => `${n}件の保留を解除しました`,
    btn_connect_chat: "チャット接続",
    btn_connected: "接続済み",
    broadcast_url_label: "配信URL: ",
    manual_input_link: "放送URLを入力",
    manual_input_clear: "クリア",
    manual_dialog_title: "配信URLを入力",
    manual_dialog_hint: "YouTube または niconico の配信URL / ID を入力してください。",
    manual_dialog_prompt: "YouTube / niconico の配信URL または ID を入力してください",
    manual_input_invalid: "URL を判定できませんでした。",
    manual_status_manual: "手動入力",
    btn_cancel: "キャンセル",
    btn_apply: "決定",
    lbl_language: "言語",
    lbl_debug_comment: "デバッグコメント",
    lbl_user_optional: "ユーザー (任意)",
    lbl_destination: "送信先",
    lbl_dest_debug: "デバッグ (内部)",
    lbl_browser_auth: "ブラウザCookie認証",
    lbl_configuration: "設定: config/settings.toml で Cookie を取得するブラウザを指定してください (chrome, edge, firefox)。",
    lbl_supported_browsers: "",
    lbl_profile_optional: "",
    rule_concurrent_label: "同時リクエスト制限",
    rule_concurrent_max_label: "ユーザーごとの上限数",
    btn_save: "保存",
    btn_send: "送信",
    btn_connect: "接続",
    msg_suspend_fail: (msg) => `操作に失敗: ${msg}`,
    msg_comment_saved: "コメントを保存しました",
    msg_request_registered: (id) => `登録しました: ${id}`,
    msg_update_fail: (msg) => `更新失敗: ${msg}`,
    msg_send_fail: (msg) => `送信失敗: ${msg}`,
    msg_clear_fail: (msg) => `クリア失敗: ${msg}`,
    msg_skip_fail: (msg) => `スキップ失敗: ${msg}`,
    msg_reorder_fail: (msg) => `並び替え失敗: ${msg}`,
    msg_parse_fail: "ライブ更新の解析に失敗しました",
    msg_action_fail: ({ label, msg }) => `${label ?? "操作"}失敗: ${msg ?? ""}`,
    reason_duplicate_in_queue: ({ url }) => `既にリクエスト済み: ${url ?? ""}`,
    reason_cooldown_wait: ({ minutes, url }) => minutes === 0
      ? `キューを空にしないと再リク不可 (${url ?? ""})`
      : `${minutes}分後に再リク可能 (${url ?? ""})`,
    rule_site_section: "許可サイト",
    rule_site_youtube: "youtube.com",
    rule_site_nicovideo: "nicovideo.jp",
    rule_site_bilibili: "bilibili.com",
    rule_custom_section: "カスタムホワイトリスト",
    rule_custom_pattern_placeholder: "正規表現またはURLパターン (例: https://example.com/watch/(\\w+))",
    rule_custom_alias_placeholder: "短縮エイリアス (例: sc)",
    rule_custom_add: "パターン追加",
    rule_custom_remove: "削除",
    rule_ng_section: "NGユーザー",
    rule_ng_enable: "NGユーザーのリクエストを拒否",
    rule_ng_input_label: "ユーザーIDを追加",
    rule_ng_placeholder: "完全一致のユーザーID",
    rule_ng_add: "追加",
    rule_ng_clear: "リストを空にする",
    rule_ng_empty: "NGユーザーは登録されていません",
    rule_ng_hint: "コメントを右クリックすると素早く追加できます",
    reason_invalid_url: ({ url }) => `${url ?? ""} は無効なURLです`,
    reason_site_disabled: ({ siteKey }) => {
      const labels = {
        youtube: "youtube.com",
        nicovideo: "nicovideo.jp",
        bilibili: "bilibili.com",
      };
      const name = labels[siteKey] ?? "このサイト";
      return `${name} はリクエストを許可していません`;
    },
    reason_ng_user: ({ user }) => `NGユーザーのため拒否しました: ${user ?? ""}`,
    confirm_delete: "この項目を削除しますか？",
    confirm_delete_all: "再生リストをすべて削除しますか？",
    confirm_delete_logs: "再生ログをすべて削除しますか？",
    confirm_clear_ng_users: "NGユーザーをすべて削除しますか？",
    tooltip_suspend_origin: ({ reason }) => `保留中 (理由: ${reason ?? ""})`,
    tooltip_suspend_plain: "保留中",
    anonymous_user: "匿名",
    queue_empty: "キューは空です",
    comments_empty: "コメントはありません",
    comments_header_time: "時刻",
    comments_header_user: "投稿者",
    comments_header_body: "本文",
    comments_request_detected: "リクエストを検出",
    comments_request_failed: ({ reason }) => reason
      ? `リクエストがエラーになりました: ${reason}`
      : "リクエストがエラーになりました",
    comments_request_rejected: ({ reason }) => reason
      ? `リクエストが拒否されました: ${reason}`
      : "リクエストが拒否されました",
    comments_clear: "全削除",
    comments_clear_done: "コメントを削除しました",
    comments_clear_fail: (msg) => `コメント削除に失敗しました: ${msg}`,
    comments_download_fail: (msg) => `CSVダウンロードに失敗しました: ${msg}`,
    comments_copy_done: "コメントCSVをコピーしました",
    comments_copy_fail: (msg) => `コピーに失敗しました: ${msg}`,
    single_comment_copy_done: "コメント本文をコピーしました",
    user_id_copy_done: "ユーザーIDをコピーしました",
    confirm_delete_comments: "コメントをすべて削除しますか？",
    log_header_time: "時刻",
    log_header_title: "タイトル",
    log_header_url: "URL",
    log_clear: "全削除",
    log_clear_done: "再生ログを削除しました",
    log_clear_fail: (msg) => `再生ログの削除に失敗しました: ${msg}`,
    log_download_fail: (msg) => `CSVダウンロードに失敗しました: ${msg}`,
    log_copy_done: "再生ログCSVをコピーしました",
    log_copy_fail: (msg) => `コピーに失敗しました: ${msg}`,
    log_empty: "再生履歴はありません",
    log_title_unknown: "タイトル未設定",
    queue_title_loading: "タイトル取得中",
    system_in_use: "yt-dlp (使用中)",
    system_latest: "yt-dlp 最新",
    system_ytdlp_combined: "yt-dlp (最新リリース)",
    system_update_btn: "更新",
    status_label_queued: "キュー待ち",
    status_label_validating: "確認中",
    status_label_downloading: "ダウンロード中",
    status_label_ready: "準備完了",
    status_label_playing: "再生中",
    status_label_done: "完了",
    status_label_failed: "エラー",
    status_label_rejected: "拒否",
    status_label_suspend: "保留",
    reason_concurrent_limit: ({ limit }) => limit
      ? `同時リク上限に達しました (最大 ${limit})`
      : "同時リク上限に達しました",
  
    confirm_delete_all: "再生リストをすべて削除しますか？",
    confirm_delete_logs: "再生ログをすべて削除しますか？",
    confirm_clear_ng_users: "NGユーザーをすべて削除しますか？",
    tooltip_suspend_origin: ({ reason }) => `保留中 (元: ${reason ?? ""})`,
    tooltip_suspend_plain: "保留中",
    anonymous_user: "匿名",
    queue_empty: "キューは空です",
    comments_empty: "コメントはありません",
    comments_header_time: "時刻",
    comments_header_user: "投稿者",
    comments_header_body: "本文",
    comments_request_detected: "リクエスト検出済み",
    comments_request_failed: ({ reason }) => reason
      ? `リクエストがエラーになりました: ${reason}`
      : "リクエストがエラーになりました",
    comments_request_rejected: ({ reason }) => reason
      ? `リクエストを拒否しました: ${reason}`
      : "リクエストを拒否しました",
    comments_clear: "全削除",
    comments_clear_done: "コメント履歴を削除しました",
    comments_clear_fail: (msg) => `コメント履歴の削除に失敗しました: ${msg}`,
    comments_download_fail: (msg) => `CSVのダウンロードに失敗しました: ${msg}`,
    comments_copy_done: "コメント履歴のCSVをコピーしました",
    comments_copy_fail: (msg) => `コピーに失敗しました: ${msg}`,
    single_comment_copy_done: "コメント本文をコピーしました",
    user_id_copy_done: "ユーザーIDをコピーしました",
    confirm_delete_comments: "コメント履歴をすべて削除しますか？",
    log_header_time: "時刻",
    log_header_title: "タイトル",
    log_header_url: "URL",
    log_clear: "全削除",
    log_clear_done: "再生ログを削除しました",
    log_clear_fail: (msg) => `再生ログの削除に失敗しました: ${msg}`,
    log_download_fail: (msg) => `CSVのダウンロードに失敗しました: ${msg}`,
    log_copy_done: "再生ログのCSVをコピーしました",
    log_copy_fail: (msg) => `コピーに失敗しました: ${msg}`,
    log_empty: "再生履歴はありません",
    log_title_unknown: "タイトル未取得",
    queue_title_loading: "タイトル取得中",
    system_in_use: "yt-dlp (使用中)",
    system_latest: "yt-dlp 最新リリース",
    system_ytdlp_combined: "yt-dlp (最新リリース)",
    system_update_btn: "アップデート",
    status_label_queued: "待機中",
    status_label_validating: "検証中",
    status_label_downloading: "DL中",
    status_label_ready: "準備完了",
    status_label_playing: "再生中",
    status_label_done: "再生済",
    status_label_failed: "エラー",
    status_label_rejected: "拒否",
    status_label_suspend: "保留",
    reason_concurrent_limit: ({ limit }) => limit
      ? `同時に保持できるリクエストは最大${limit}件です`
      : "同時リクエストの上限に達しました",
  },
};

let resolved = null;
let chosen = "auto";
const STORAGE_KEY = "botnama_locale";

const format = (template, params = {}) => {
  if (typeof template !== "string") return template;
  return template.replace(/\{(\w+)\}/g, (_, k) => {
    const v = params?.[k];
    return v === undefined || v === null ? "" : String(v);
  });
};

export const setLocale = (loc) => {
  chosen = loc || "auto";
  if (chosen === "auto") {
    resolved = null;
  } else {
    resolved = chosen.toLowerCase().startsWith("ja") ? "ja" : "en";
  }
  try {
    localStorage.setItem(STORAGE_KEY, chosen);
  } catch (_) {
    // ignore
  }
};

export const getLocale = () => resolved || "en";

export const detectLocale = async () => {
  if (resolved) return resolved;
  try {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (stored) {
      setLocale(stored);
      if (resolved) return resolved;
    }
  } catch (_) {
    // ignore storage read errors (e.g., Safari private mode)
  }
  try {
    const res = await fetch('/api/locale');
    if (res.ok) {
      const data = await res.json();
      if (data?.locale) setLocale(data.locale);
    }
  } catch (_) {
    // tolerant of locale endpoint failures
  }
  if (!resolved) {
    const nav = navigator.language || navigator.userLanguage || 'en';
    setLocale(nav);
  }
  return resolved;
};

export const t = (key, params) => {
  const locale = resolved || 'en';
  const dict = translations[locale] || translations.en;
  const entry = dict[key] ?? translations.en[key] ?? key;
  if (typeof entry === 'function') return entry(params ?? {});
  return format(entry, params);
};




